/*! For license information please see src_bootstrap_app_tsx.5d8ed49a.chunk.js.LICENSE.txt */
(globalThis.webpackChunkconnector_tester=globalThis.webpackChunkconnector_tester||[]).push([["src_bootstrap_app_tsx"],{45597:(e,t,r)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return a.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var n=o(r(96369)),s=o(r(18126)),a=o(r(69363)),i=o(r(83272));function o(e){return e&&e.__esModule?e:{default:e}}const l=[n.default,s.default];t.h0=l},49178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Page:()=>V,__esModule:()=>K.X$,logo:()=>K.jY,panels:()=>K.h0,readme:()=>K.ng});var n=r(55754),s=r(68275),a=r(92950),i=r(45055),o=r(32671),l=r(80754),c=r(45263);const d=()=>{const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)("https://sentre.io/"),[s,i]=(0,a.useState)(""),d=(0,a.useMemo)((()=>s+"-iframe"),[s]),p=(0,a.useCallback)((()=>n(e)),[e]),u=(0,a.useCallback)((()=>{const e=document.getElementById(d);e&&(e.src+="")}),[d]);return(0,a.useEffect)((()=>new l.Gateway(window.sentre.wallet).terminate),[]),(0,c.jsxs)(o.Row,{gutter:[12,12],children:[(0,c.jsx)(o.Col,{span:8,children:(0,c.jsx)(o.Input,{value:s,onChange:e=>i(e.target.value||""),placeholder:"my_app_id"})}),(0,c.jsx)(o.Col,{span:16,children:(0,c.jsx)(o.Input,{value:e,onChange:e=>t(e.target.value||""),placeholder:"http://localhost:3000",suffix:(0,c.jsx)(o.Button,{type:"text",size:"small",onClick:e===r?u:p,disabled:!e,style:{marginRight:-7},children:e===r?"Refresh":"Save"})})}),(0,c.jsx)(o.Col,{span:24,children:(0,c.jsx)(o.Card,{bodyStyle:{padding:16,height:"calc(100vh - 206px)"},children:(0,c.jsx)("iframe",{id:d,src:r,title:"Senhub Connector Tester.",style:{height:"100%",width:"100%",border:"none",borderRadius:8},loading:"lazy",allowFullScreen:!0})})})]})};var p=r(69716),u=r(19289),f=r(21995),h=r.n(f);const y={appId:"connector_tester",url:"https://tuphan-dn.github.io/connector-tester/index.js"},j={development:{...y},production:{...y}},x=e=>({origin:e,dapp:{index:e+"/dapp",get author(){return this.index+"/author"},get verify(){return this.index+"/verify"}}}),m={development:{...x("https://api.sentre.io")},production:{...x("https://api.sentre.io")}},g={manifest:j[s.env],api:m[s.env]},{api:{dapp:b}}=g,v="dapp",w=(0,u.createAsyncThunk)("dapp/getDApps",(async()=>{const{data:e}=await h().get(b.author,{withCredentials:!0}),t={};return e.forEach((e=>t[e.appId]=e)),t})),C=(0,u.createAsyncThunk)("dapp/submitDApp",(async e=>{const{data:t}=await h().put(b.index,e,{withCredentials:!0});return{[t.appId]:t}})),S=(0,u.createAsyncThunk)("dapp/deleteDApp",(async e=>(await h().delete(`${b.index}/${e}`,{withCredentials:!0}),{appId:e}))),O=(0,u.createSlice)({name:v,initialState:{},reducers:{},extraReducers:e=>{e.addCase(w.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)})).addCase(C.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)})).addCase(S.fulfilled,((e,t)=>{let{payload:r}=t;delete e[r.appId]}))}}).reducer;var k=r(24214);class T extends a.Component{constructor(e){super(e),this.state={failed:!1}}componentDidUpdate(e){if(e.children!==this.props.children)return this.setState({failed:!1})}static getDerivedStateFromError(){return{failed:!0}}render(){const{failed:e}=this.state,{children:t,defaultChildren:r}=this.props;return e||!t?r:t}}const R=T,_=e=>{let{url:t,scope:r}=e;const n=(0,a.useCallback)((async e=>{const r=t.replace("index.js",""),n=await fetch(r+`${e}-asset-senhub.json`),s=await n.json();return Object.keys(s).forEach((e=>s[e]=(e=>{if("string"===typeof e)return r+e;if(Array.isArray(e))return e.map((e=>r+e));throw new Error("Invalid static asset")})(s[e]))),s}),[t]),{data:s}=(0,k.ZP)(r,n,{shouldRetryOnError:!1,revalidateOnFocus:!1,dedupingInterval:36e5});return s||{}},I=(0,a.forwardRef)(((e,t)=>{let{type:r="default",manifest:n,render:s}=e;const{[r]:i}=_(n);return(0,a.cloneElement)(s(i),t?{ref:t}:{})}));I.displayName="RemoteStatic";const E=(0,a.forwardRef)(((e,t)=>{let{type:r,appId:n,defaultData:i="",render:l}=e;const{url:d}=(0,s.useRegisterSelector)((e=>e[n]))||{url:""},p=(0,a.useMemo)((()=>({url:d,scope:n,module:"./static"})),[d,n]);return d?(0,c.jsx)(R,{defaultChildren:l(i),children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)(o.Spin,{size:"small"}),children:(0,c.jsx)(I,{type:r,manifest:p,render:l,ref:t})})}):null}));E.displayName="StaticLoader";const P=(0,a.forwardRef)(((e,t)=>{let{type:r="default",manifest:n,render:s}=e;const{[r]:i}=_(n);return(0,a.cloneElement)(s(i||[]),t?{ref:t}:{})}));P.displayName="RemoteMultiStatic";const A=(0,a.forwardRef)(((e,t)=>{let{type:r,appId:n,defaultData:i=[""],render:l}=e;const{url:d}=(0,s.useRegisterSelector)((e=>e[n]))||{url:""},p=(0,a.useMemo)((()=>({url:d,scope:n,module:"./static"})),[d,n]);return d?(0,c.jsx)(R,{defaultChildren:l(i),children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)(o.Spin,{size:"small"}),children:(0,c.jsx)(P,{type:r,manifest:p,render:l,ref:t})})}):null}));A.displayName="MultiStaticLoader";const D=e=>{let{avatarProps:t}=e;return(0,c.jsx)(o.Avatar,{...t,children:(0,c.jsx)(p.Z,{name:"image-outline"})})},M=e=>{let{src:t,appId:r,onClick:n=(()=>{}),size:a=64,name:i=!0}=e;const{name:l}=(0,s.useRegisterSelector)((e=>e[r]))||{name:"Unknown"};return(0,c.jsxs)(o.Space,{direction:"vertical",style:{width:a,textAlign:"center",lineHeight:1.25},onClick:n,children:[(0,c.jsx)(D,{appId:r,avatarProps:{src:t,shape:"square",size:a,style:{cursor:"pointer"}}}),i?(0,c.jsx)(o.Typography.Text,{style:{fontSize:Math.floor(a/4.5)},children:l}):null]})},z=e=>{let{src:t,appId:r,onClick:n=(()=>{}),size:a=32,name:i=!0}=e;const{name:l}=(0,s.useRegisterSelector)((e=>e[r]))||{name:"Unknown"};return(0,c.jsxs)(o.Space,{style:{cursor:"pointer",lineHeight:1},onClick:n,children:[(0,c.jsx)(D,{appId:r,avatarProps:{src:t,shape:"square",size:a,style:{cursor:"pointer"}}}),i?(0,c.jsx)(o.Typography.Text,{children:l}):null]})},N=e=>{let{direction:t="vertical",...r}=e;return"vertical"===t?(0,c.jsx)(M,{...r}):(0,c.jsx)(z,{...r})},$=e=>(0,c.jsx)(E,{type:"logo",appId:e.appId,render:t=>(0,c.jsx)(N,{...e,src:t})}),B=e=>{let{appId:t}=e;const[r,s]=(0,a.useState)(!1),i=(0,n.useDispatch)(),{name:l,description:d}=(0,n.useSelector)((e=>e.dapp[t])),u=(0,a.useCallback)((async()=>{try{return s(!0),await i(S(t)).unwrap(),window.notify({type:"success",description:`Delist ${l}!`})}catch(e){return window.notify({type:"error",description:e.message})}finally{return s(!1)}}),[i,t,l]);return(0,c.jsx)(o.Card,{bodyStyle:{padding:24},children:(0,c.jsxs)(o.Row,{gutter:[12,12],wrap:!1,align:"middle",children:[(0,c.jsx)(o.Col,{children:(0,c.jsx)($,{appId:t,name:!1})}),(0,c.jsx)(o.Col,{flex:"auto",children:(0,c.jsxs)(o.Space,{direction:"vertical",children:[(0,c.jsx)(o.Typography.Title,{level:5,children:l}),(0,c.jsx)(o.Typography.Text,{children:d})]})}),(0,c.jsx)(o.Col,{children:(0,c.jsx)(o.Button,{type:"text",icon:(0,c.jsx)(p.Z,{name:"trash-outline"}),onClick:u,loading:r})})]})})},L=()=>{const e=(0,n.useDispatch)(),t=(0,n.useSelector)((e=>e.dapp)),r=(0,a.useMemo)((()=>Object.keys(t)),[t]);return(0,a.useEffect)((()=>{e(w())}),[e]),(0,c.jsxs)(o.Row,{gutter:[12,12],justify:"center",children:[(0,c.jsx)(o.Col,{span:24,children:(0,c.jsx)(o.Typography.Title,{level:4,children:`My DApps (${r.length})`})}),r.length?r.map((e=>(0,c.jsx)(o.Col,{span:24,children:(0,c.jsx)(B,{appId:e})},e))):(0,c.jsx)(o.Col,{children:(0,c.jsx)(o.Empty,{})})]})},U=()=>{const[e,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)([]),l=(0,n.useDispatch)(),d=(0,s.useWalletAddress)(),u=(0,a.useMemo)((()=>{var e;return null===(e=r[0])||void 0===e?void 0:e.originFileObj}),[r]),f=(0,a.useCallback)((async e=>{try{if(e.stopPropagation(),t(!0),!u)throw new Error("Cannot submit empty file");const r=await(e=>new Promise(((t,r)=>{const n=new FileReader;n.onload=e=>{var n;if(null===(n=e.target)||void 0===n||!n.result)return r("Cannot read empty file");const s=JSON.parse(e.target.result.toString());return t(s)},n.onerror=r,n.readAsText(e)})))(u);return await l(C({...r,author:{...r.author,walletAddress:d}})),i([]),window.notify({type:"success",description:`Complete the ${r.name} submission!`})}catch(r){return window.notify({type:"error",description:r.message})}finally{return t(!1)}}),[l,d,u]);return(0,a.useEffect)((()=>{l(w())}),[l]),(0,c.jsxs)(o.Row,{gutter:[12,12],justify:"center",children:[(0,c.jsx)(o.Col,{xs:24,md:18,children:(0,c.jsx)(o.Upload.Dragger,{accept:".json",beforeUpload:()=>!1,onRemove:()=>(i([]),!0),onChange:e=>{let{fileList:t}=e;return i(t)},fileList:r,maxCount:1,children:(0,c.jsxs)(o.Space,{direction:"vertical",size:"large",align:"center",children:[(0,c.jsx)(o.Typography.Title,{level:3,children:"Click or Drop file to upload the Manifest"}),(0,c.jsxs)(o.Typography.Text,{children:["The accepted file type is only ",(0,c.jsx)("code",{children:".json"}),"."]}),(0,c.jsxs)(o.Space,{children:[(0,c.jsx)(o.Button,{icon:(0,c.jsx)(p.Z,{name:"cloud-upload-outline"}),children:"Upload"}),u&&(0,c.jsx)(o.Button,{type:"primary",icon:(0,c.jsx)(p.Z,{name:"paper-plane-outline"}),onClick:f,loading:e,children:"Submit"})]})]})})}),(0,c.jsx)(o.Col,{xs:24}),(0,c.jsx)(o.Col,{xs:24,md:18,children:(0,c.jsx)(L,{})}),(0,c.jsx)(o.Col,{xs:24})]})};let F;!function(e){e.Tester="connector-tester",e.Submission="dapp-submission"}(F||(F={}));const Z=e=>{let{type:t=F.Tester}=e;return t===F.Submission?(0,c.jsx)(U,{}):(0,c.jsx)(d,{})},q=()=>{const{to:e}=(0,s.useAppRoute)(),{search:t}=(0,i.useLocation)(),r=(0,a.useMemo)((()=>{const e=new URLSearchParams(t).get("tab");return Object.values(F).includes(e)?e:F.Tester}),[t]),n=(0,a.useCallback)((t=>e(`?tab=${t}`)),[e]);return(0,c.jsxs)(o.Row,{gutter:[24,24],children:[(0,c.jsx)(o.Col,{span:24,children:(0,c.jsx)(o.Row,{gutter:[24,24],justify:"center",children:(0,c.jsx)(o.Col,{children:(0,c.jsx)(o.Segmented,{options:[{label:"Connector Tester",value:F.Tester},{label:"DApp Submission",value:F.Submission}],value:r,onChange:e=>n(e)})})})}),(0,c.jsx)(o.Col,{span:24,children:(0,c.jsx)(Z,{type:r})})]})};var Y=r(71256),H=r(48744),J=r.n(H),W=r(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const X={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof Y.PublicKey||e instanceof J()||W.isBuffer(e)}},G=(0,u.configureStore)({middleware:e=>e(X),devTools:!1,reducer:{dapp:O}});var K=r(45597);const{manifest:{appId:Q}}=g,V=()=>(0,c.jsx)(s.AntdProvider,{appId:Q,children:(0,c.jsx)(n.Provider,{store:G,children:(0,c.jsx)(q,{})})})},25882:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function s(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(s){return!1}}()?Object.assign:function(e,a){for(var i,o,l=s(e),c=1;c<arguments.length;c++){for(var d in i=Object(arguments[c]))r.call(i,d)&&(l[d]=i[d]);if(t){o=t(i);for(var p=0;p<o.length;p++)n.call(i,o[p])&&(l[o[p]]=i[o[p]])}}return l}},62175:(e,t,r)=>{"use strict";r(25882);var n=r(92950),s=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;s=a("react.element"),a("react.fragment")}var i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:i.current}}t.jsx=c,t.jsxs=c},45263:(e,t,r)=>{"use strict";e.exports=r(62175)},83272:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/README.ff93448fef94ea73029b.md"},69363:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/logo.253548ecad509e29d940.png"},96369:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/panel-1.8b8b6d38dde47cb968cd.png"},18126:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/panel-2.82047203a7541d412288.png"},7420:()=>{},95856:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx.5d8ed49a.chunk.js.map